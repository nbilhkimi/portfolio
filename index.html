<?php
include 'components/connect.php';
session_start();
$user_id = $_SESSION['user_id'] ?? '';
?>

<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Portfolio | Nabil Nur Hakimi</title>
   <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Poppins:wght@300;600;900&display=swap" rel="stylesheet">
   
   <style>
      :root {
          --primary-orange: #ff5e3a; 
          --neon-glow: rgba(255, 94, 58, 0.6);
          --bg-dark: #0a0a0a;
          --card-bg: rgba(20, 20, 20, 0.7);
          --transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
      }

      * { margin: 0; padding: 0; box-sizing: border-box; }
      
      body { 
          background-color: var(--bg-dark); 
          color: #fff;
          font-family: 'Poppins', sans-serif;
          overflow-x: hidden;
          min-height: 100vh;
      }

      /* --- ANIMATIONS --- */
      @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
      }

      #canvas-bg {
          position: fixed;
          top: 0; left: 0; width: 100%; height: 100%;
          z-index: -1;
          background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
      }

      .transition-swipe {
          position: fixed;
          top: 0; left: 100%;
          width: 100%; height: 100%;
          background: var(--primary-orange);
          z-index: 9999;
          transition: left 0.5s cubic-bezier(0.77, 0, 0.175, 1);
          pointer-events: none;
      }

      /* --- HEADER SECTION --- */
      .header-wrapper {
          padding: 100px 8% 60px 8%;
          position: relative;
          animation: fadeInUp 1s ease forwards;
      }

      .header-container {
          display: grid;
          grid-template-columns: 1.2fr 0.8fr; 
          gap: 40px;
          max-width: 1400px;
          margin: 0 auto;
          align-items: end;
      }

      .title-group {
          display: flex;
          align-items: baseline;
          flex-wrap: wrap;
          gap: 20px;
      }

      .title-side .sub-title {
          color: var(--primary-orange);
          text-transform: uppercase;
          font-weight: 700;
          letter-spacing: 8px;
          font-size: 0.8rem;
          margin-bottom: 15px;
          display: block;
          font-family: 'Syncopate', sans-serif;
      }

      .title-side h1 {
          font-size: clamp(3rem, 8vw, 6.5rem);
          font-weight: 900;
          line-height: 0.9;
          text-transform: uppercase;
          letter-spacing: -2px;
          font-family: 'Syncopate', sans-serif;
          background: linear-gradient(to bottom, #fff 100%, #444 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          filter: drop-shadow(0 0 15px rgba(255,255,255,0.1));
      }

      /* --- NEW BUTTONS --- */
      .btn-container { display: flex; gap: 12px; margin-bottom: 10px; }

      .resume-btn, .contact-btn {
          display: inline-flex;
          padding: 10px 18px;
          border: 1px solid var(--primary-orange);
          color: var(--primary-orange);
          text-decoration: none;
          font-family: 'Syncopate', sans-serif;
          font-size: 0.6rem;
          font-weight: 700;
          letter-spacing: 1px;
          text-transform: uppercase;
          transition: var(--transition);
          cursor: pointer;
          background: transparent;
      }

      .contact-btn { background: var(--primary-orange); color: #000; }

      .resume-btn:hover, .contact-btn:hover {
          box-shadow: 0 0 15px var(--neon-glow);
          transform: translateY(-2px);
          filter: brightness(1.1);
      }

      /* --- CONTACT MODAL --- */
      .modal-overlay {
          position: fixed;
          top: 0; left: 0; width: 100%; height: 100%;
          background: rgba(0,0,0,0.9);
          display: none;
          justify-content: center;
          align-items: center;
          z-index: 10000;
          backdrop-filter: blur(10px);
      }

      .modal-box {
          background: var(--card-bg);
          padding: 40px;
          width: 90%;
          max-width: 450px;
          border: 1px solid var(--primary-orange);
          position: relative;
          animation: fadeInUp 0.4s ease;
      }

      .modal-box input, .modal-box textarea {
          width: 100%;
          padding: 12px;
          margin-bottom: 15px;
          background: #111;
          border: 1px solid #333;
          color: #fff;
          outline: none;
      }

      .close-modal { position: absolute; top: 15px; right: 15px; cursor: pointer; color: #777; }

      /* --- DESCRIPTION --- */
      .description-side p {
          font-size: 1rem;
          line-height: 1.8;
          color: #aaa;
          border-left: 2px solid var(--primary-orange); 
          padding: 20px 25px;
          max-width: 450px;
          backdrop-filter: blur(5px);
          background: rgba(255,255,255,0.02);
      }

      /* --- SERVICES GRID --- */
      .services-grid {
          display: flex;
          width: 100%;
          height: 60vh; 
          padding: 20px 8%;
          gap: 15px;
          opacity: 0;
          animation: fadeInUp 1s ease forwards;
          animation-delay: 0.3s;
      }

      .service-card {
          position: relative; flex: 1; overflow: hidden; display: flex; align-items: flex-end;
          padding: 40px; text-decoration: none; transition: var(--transition);
          border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); background: var(--card-bg);
      }

      .service-card::before {
          content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
          background-size: cover; background-position: center; transition: var(--transition);
          z-index: 1; opacity: 0.6; filter: grayscale(1) brightness(0.6);
      }

      .card-1::before { background-image: url('images/dp.jpg'); }
      .card-2::before { background-image: url('images/meta.png'); }
      .card-3::before { background-image: url('images/book3.png'); }
      .card-4::before { background-image: url('images/gallery.jpg'); }

      .service-card:hover { flex: 2; border-color: var(--primary-orange); box-shadow: 0 0 30px var(--neon-glow); }
      .service-card:hover::before { opacity: 1; transform: scale(1.05); filter: grayscale(0) brightness(1); }

      .card-number {
          position: absolute; top: 20px; left: 20px; font-size: 4rem; font-weight: 900;
          opacity: 0.1; font-family: 'Syncopate', sans-serif; color: #fff; z-index: 3;
      }

      .card-content { position: relative; z-index: 4; }
      .card-content h3 {
          color: #fff; font-size: 1.8rem; font-weight: 700; text-transform: uppercase;
          font-family: 'Syncopate', sans-serif; line-height: 1.2; text-shadow: 0 0 15px rgba(0,0,0,0.9);
      }

      @media (max-width: 900px) {
          .header-container { grid-template-columns: 1fr; }
          .services-grid { flex-direction: column; height: auto; }
          .service-card { height: 250px; flex: none; }
          .title-group { flex-direction: column; align-items: flex-start; gap: 10px; }
      }
   </style>
</head>
<body>

<canvas id="canvas-bg"></canvas>
<div class="transition-swipe"></div>

<div class="modal-overlay" id="contactModal">
    <div class="modal-box">
        <span class="close-modal" id="closeModal">Ã—</span>
        <h2 style="font-family:'Syncopate'; font-size: 1rem; margin-bottom: 20px; color: var(--primary-orange);">NEW TRANSMISSION</h2>
        <form id="gform">
            <input type="email" id="email" placeholder="EMAIL" required>
            <textarea id="message" rows="5" placeholder="MESSAGE" required style="width: 100%; background:#111; color:#fff; border:1px solid #333; padding:12px;"></textarea>
            <button type="submit" id="submitText" style="width:100%; padding:15px; background:var(--primary-orange); border:none; font-family:'Syncopate'; cursor:pointer;">SEND</button>
        </form>
    </div>
</div>

<div class="header-wrapper">
   <section class="header-container">
      <div class="title-side">
         <span class="sub-title">WELCOME // MY PORTFOLIO</span>
         <div class="title-group">
            <h1>Nabil<br>NurHakimi</h1>
            <div class="btn-container">
                <a href="files/resume.pdf" download class="resume-btn">Resume</a>
                <button class="contact-btn" id="openModal">Contact</button>
            </div>
         </div>
      </div>
      <div class="description-side">
         <p>Ambitious Unity Developer specializing in immersive VR/AR systems. I combine creativity with technical knowledge to build intuitive applications.</p>
      </div>
   </section>
</div>

<section class="services-grid">
   <a href="profile.html" class="service-card card-1 transition-link">
      <span class="card-number">01</span>
      <div class="card-content"><h3>Profile<br>Data</h3></div>
   </a>
   
   <a href="project.html" class="service-card card-2 transition-link">
      <span class="card-number">02</span>
      <div class="card-content"><h3>Project<br>Logs</h3></div>
   </a>
   
   <a href="award.html" class="service-card card-3 transition-link">
      <span class="card-number">03</span>
      <div class="card-content"><h3>Awards<br>Intel</h3></div>
   </a>
   
   <a href="gallery.html" class="service-card card-4 transition-link">
      <span class="card-number">04</span>
      <div class="card-content"><h3>My<br>Gallery</h3></div>
   </a>
</section>

<script>
   // MODAL & GFORM LOGIC
   const modal = document.getElementById('contactModal');
   const openBtn = document.getElementById('openModal');
   const closeBtn = document.getElementById('closeModal');
   const form = document.getElementById('gform');

   openBtn.onclick = () => modal.style.display = 'flex';
   closeBtn.onclick = () => modal.style.display = 'none';
   window.onclick = (e) => { if(e.target == modal) modal.style.display = 'none'; }

   form.onsubmit = async (e) => {
      e.preventDefault();
      const btn = document.getElementById('submitText');
      btn.innerText = "SENDING...";
      const formData = new FormData();
      formData.append("entry.1740924976", document.getElementById('email').value);
      formData.append("entry.1691456184", document.getElementById('message').value);
      
      await fetch("https://docs.google.com/forms/d/e/1FAIpQLSdnp1brNHNwv1ruz1cHDXvFn6e31TFCN1OfbE9xOSplXuRLhw/formResponse", {
         method: 'POST', mode: 'no-cors', body: formData
      });
      
      btn.innerText = "SENT";
      setTimeout(() => { modal.style.display = 'none'; form.reset(); btn.innerText = "SEND"; }, 2000);
   };

   // PARTICLE CANVAS
   const canvas = document.getElementById('canvas-bg');
   const ctx = canvas.getContext('2d');
   let particles = [];
   function initCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
   class Particle {
      constructor() {
         this.x = Math.random() * canvas.width;
         this.y = Math.random() * canvas.height;
         this.size = Math.random() * 2 + 1;
         this.speedX = Math.random() * 1 - 0.5;
         this.speedY = Math.random() * 1 - 0.5;
      }
      update() {
         this.x += this.speedX; this.y += this.speedY;
         if (this.x > canvas.width) this.x = 0; if (this.x < 0) this.x = canvas.width;
         if (this.y > canvas.height) this.y = 0; if (this.y < 0) this.y = canvas.height;
      }
      draw() {
         ctx.fillStyle = 'rgba(255, 94, 58, 0.5)';
         ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
      }
   }
   function createParticles() {
      particles = [];
      for (let i = 0; i < 80; i++) { particles.push(new Particle()); }
   }
   function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p, index) => {
         p.update(); p.draw();
         for (let j = index; j < particles.length; j++) {
            const dx = p.x - particles[j].x; const dy = p.y - particles[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 150) {
               ctx.strokeStyle = `rgba(255, 94, 58, ${1 - distance/150})`;
               ctx.lineWidth = 0.5; ctx.beginPath(); ctx.moveTo(p.x, p.y);
               ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
            }
         }
      });
      requestAnimationFrame(animate);
   }
   window.addEventListener('resize', () => { initCanvas(); createParticles(); });
   initCanvas(); createParticles(); animate();

   // TRANSITIONS
   document.querySelectorAll('.transition-link').forEach(link => {
      link.addEventListener('click', function(e) {
         e.preventDefault();
         const target = this.getAttribute('href');
         document.querySelector('.transition-swipe').style.left = '0';
         setTimeout(() => { window.location.href = target; }, 550);
      });
   });
</script>

</body>
</html>
